<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <title>Dark Triad Assessments</title>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content="Dark Triad Assessments Web Application"/>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/9.5.1/math.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/dayjs@1.10.7/dayjs.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="intro">
        <h1>Welcome to Dark Triad Assessments</h1>
    </div>
    <div id="darkModeToggleContainer">
        <button id="darkModeToggle" aria-label="Toggle Dark Mode">ðŸŒ™ Dark Mode</button>
    </div>
    <div id="content" class="hidden">
        <header>
            <h1>Dark Triad Assessments</h1>
        </header>
        <nav>
            <ul>
                <li><a href="#assessments">Assessments</a></li>
                <li><a href="#literature">Literature Review</a></li>
                <li><a href="#background">Background & History</a></li>
                <li><a href="#psychometric">Psychometric Calculator</a></li>
            </ul>
        </nav>
        <div id="settingsMenu">
            <label for="autoProgressToggle">
                <input type="checkbox" id="autoProgressToggle">
                Enable Auto-Progress (5s)
            </label>
        </div>
        <main>
            <section id="assessments">
                <div id="sdt3" class="assessment">
                    <h2>Short Dark Triad (SDT3)</h2>
                    <p>The SDT3 assesses three personality traits: Machiavellianism, Narcissism, and Psychopathy.</p>
                    <button onclick="startAssessment('sdt3')">Start SDT3 Assessment</button>
                </div>
                <div id="dirtyDozen" class="assessment">
                    <h2>Dirty Dozen</h2>
                    <p>The Dirty Dozen is a brief measure of the Dark Triad personality traits.</p>
                    <button onclick="startAssessment('dirtyDozen')">Start Dirty Dozen Assessment</button>
                </div>
                <div id="sdt4" class="assessment">
                    <h2>Short Dark Tetrad (SDT4)</h2>
                    <p>The SDT4 measures four dark personality traits: Machiavellianism, Narcissism, Psychopathy, and Sadism.</p>
                    <button onclick="startAssessment('sdt4')">Start SDT4 Assessment</button>
                </div>
                <div id="machIV" class="assessment">
                    <h2>MACH IV</h2>
                    <p>The MACH IV is a test of Machiavellianism, measuring a person's willingness to manipulate others.</p>
                    <button onclick="startAssessment('machIV')">Start MACH IV Assessment</button>
                </div>
            </section>

            <section id="literature" class="hidden">
                <h2>Literature Review</h2>
                <div id="literatureContent">
                    <h3>Key Studies</h3>
                    <ul id="keyStudiesList"></ul>
                    <h3>Recent Developments</h3>
                    <ul id="recentDevelopmentsList"></ul>
                    <h3>Critiques and Controversies</h3>
                    <ul id="critiquesList"></ul>
                </div>
            </section>

            <section id="background" class="hidden">
                <h2>Background & History</h2>
                <div id="backgroundContent">
                    <h3>Origins of the Dark Triad</h3>
                    <p id="originsContent"></p>
                    <h3>Evolution of the Concept</h3>
                    <p id="evolutionContent"></p>
                    <h3>Impact on Psychology and Society</h3>
                    <p id="impactContent"></p>
                </div>
            </section>

            <section id="psychometric" class="hidden">
                <h2>Comprehensive Psychometric and Statistical Evaluation</h2>
                <div class="container">
                    <label for="scores">Enter Scores (comma-separated):</label>
                    <textarea id="scores" rows="4" placeholder="e.g., 85, 90, 88, 93, 76, 95"></textarea>

                    <label for="group2">Enter Scores for Group 2 (Optional, for T-Test):</label>
                    <textarea id="group2" rows="4" placeholder="e.g., 80, 85, 78, 92, 74, 89"></textarea>

                    <button onclick="calculateStats()">Evaluate</button>
                </div>

                <div class="results" id="results">
                    <h3>Statistical Results:</h3>
                    <p><strong>Mean:</strong> <span id="mean"></span></p>
                    <p><strong>Median:</strong> <span id="median"></span></p>
                    <p><strong>Variance:</strong> <span id="variance"></span></p>
                    <p><strong>Standard Deviation:</strong> <span id="stddev"></span></p>
                    <p><strong>Skewness:</strong> <span id="skewness"></span></p>
                    <p><strong>Kurtosis:</strong> <span id="kurtosis"></span></p>
                    <p><strong>Cronbach's Alpha (Reliability):</strong> <span id="cronbach"></span></p>
                    <p><strong>Correlation Coefficient (Pearson's r):</strong> <span id="correlation"></span></p>
                    <p><strong>T-Test (if Group 2 is entered):</strong> <span id="ttest"></span></p>
                </div>

                <div class="chart-container">
                    <canvas id="chartCanvas"></canvas>
                </div>
            </section>

            <div id="progressBarContainer" class="hidden">
                <div id="progressBar"></div>
            </div>
            <div id="assessmentQuestions" class="hidden"></div>
            <div id="results" class="hidden"></div>
            <canvas id="resultsChart" class="hidden"></canvas>
        </main>
        <footer>
            <button id="showScientificArticles">Scientific Articles</button>
        </footer>
    </div>
    <div id="articlesModal" class="modal hidden">
        <div class="modal-content">
            <span class="close">&times;</span>
            <h2>Scientific Articles</h2>
            <ul id="articlesList"></ul>
        </div>
    </div>
    <script src="script.js"></script>
    <!-- Add this just before the closing </body> tag -->
    <div id="loadingIndicator" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); justify-content: center; align-items: center; z-index: 9999;">
        <div class="spinner"></div>
    </div>

    <style>
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid var(--primary-color);
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</body>
</html>
